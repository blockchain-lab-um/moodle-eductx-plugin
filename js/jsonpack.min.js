!function(){return function e(r,n,t){function i(s,a){if(!n[s]){if(!r[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};r[s][0].call(f.exports,function(e){return i(r[s][1][e]||e)},f,f.exports,e,r,n,t)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<t.length;s++)i(t[s]);return i}}()({1:[function(e,r,n){var t=e("./main.js");window.jsonpack=t},{"./main.js":2}],2:[function(e,r,n){!function(e){e([],function(){var e=function(e){return"string"!=typeof e?e:e.replace(/[\+ \|\^\%]/g,function(e){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[e]})},r=function(e){return"string"!=typeof e?e:e.replace(/\+|%2B|%7C|%5E|%25/g,function(e){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[e]})},n=function(e){return Number.prototype.toString.call(e,36).toUpperCase()},t=function(e){return parseInt(e,36)},i=Array.prototype.indexOf||function(e,r){for(var n=r||0,t=this.length;n<t;n++)if(this[n]===e)return n;return-1};return{JSON:JSON,pack:function(r,t){var o=(t=t||{}).verbose||!1;o&&console.log("Normalize the JSON Object"),r="string"==typeof r?this.JSON.parse(r):r,o&&console.log("Creating a empty dictionary");var s={strings:[],integers:[],floats:[]};o&&console.log("Creating the AST");var a=function r(t){o&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(t));var a,u=typeof t;if(null===t)return{type:"null",index:-3};if(void 0===t)return{type:"undefined",index:-5};if(t instanceof Array){var l=["@"];for(var f in t)t.hasOwnProperty(f)&&l.push(r(t[f]));return l}if("object"===u){for(var c in l=["$"],t)t.hasOwnProperty(c)&&(l.push(r(c)),l.push(r(t[c])));return l}if(""===t)return{type:"empty",index:-4};if("string"===u)return-1==(a=i.call(s.strings,t))&&(s.strings.push(e(t)),a=s.strings.length-1),{type:"strings",index:a};if("number"===u&&t%1==0)return-1==(a=i.call(s.integers,t))&&(s.integers.push(n(t)),a=s.integers.length-1),{type:"integers",index:a};if("number"===u)return-1==(a=i.call(s.floats,t))&&(s.floats.push(t),a=s.floats.length-1),{type:"floats",index:a};if("boolean"===u)return{type:"boolean",index:t?-1:-2};throw new Error("Unexpected argument of type "+typeof t)}(r),u=s.strings.length,l=s.integers.length;s.floats.length;o&&console.log("Parsing the dictionary");var f=s.strings.join("|");return f+="^"+s.integers.join("|"),f+="^"+s.floats.join("|"),o&&console.log("Parsing the structure"),f+="^"+function e(r){if(o&&console.log("Calling a recursiveParser with "+this.JSON.stringify(r)),r instanceof Array){var t=r.shift();for(var i in r)r.hasOwnProperty(i)&&(t+=e(r[i])+"|");return("|"===t[t.length-1]?t.slice(0,-1):t)+"]"}var s=r.type,a=r.index;if("strings"===s)return n(a);if("integers"===s)return n(u+a);if("floats"===s)return n(u+l+a);if("boolean"===s)return r.index;if("null"===s)return-3;if("undefined"===s)return-5;if("empty"===s)return-4;throw new TypeError("The item is alien!")}(a),o&&console.log("Ending parser"),t.debug?{dictionary:s,ast:a,packed:f}:f},unpack:function(e,n){n=n||{};var i=e.split("^");n.verbose&&console.log("Building dictionary");var o=[],s=i[0];if(""!==s){s=s.split("|"),n.verbose&&console.log("Parse the strings dictionary");for(var a=0,u=s.length;a<u;a++)o.push(r(s[a]))}if(""!==(s=i[1]))for(s=s.split("|"),n.verbose&&console.log("Parse the integers dictionary"),a=0,u=s.length;a<u;a++)o.push(t(s[a]));if(""!==(s=i[2]))for(s=s.split("|"),n.verbose&&console.log("Parse the floats dictionary"),a=0,u=s.length;a<u;a++)o.push(parseFloat(s[a]));s=null,n.verbose&&console.log("Tokenizing the structure");var l="",f=[],c=i[3].length;for(a=0;a<c;a++){var g=i[3].charAt(a);"|"===g||"$"===g||"@"===g||"]"===g?(l&&(f.push(t(l)),l=""),"|"!==g&&f.push(g)):l+=g}var p=f.length,h=0;return n.verbose&&console.log("Starting recursive parser"),function e(){var r=f[h++];if(n.verbose&&console.log("Reading collection type "+("$"===r?"object":"Array")),"@"===r){for(var t=[];h<p;h++){var i=f[h];if(n.verbose&&console.log("Read "+i+" symbol"),"]"===i)return t;if("@"===i||"$"===i)t.push(e());else switch(i){case-1:t.push(!0);break;case-2:t.push(!1);break;case-3:t.push(null);break;case-5:t.push(void 0);break;case-4:t.push("");break;default:t.push(o[i])}}return n.verbose&&console.log("Parsed "+this.JSON.stringify(t)),t}if("$"===r){for(t={};h<p;h++){var s=f[h];if("]"===s)return t;if(s=-4===s?"":o[s],"@"===(i=f[++h])||"$"===i)t[s]=e();else switch(i){case-1:t[s]=!0;break;case-2:t[s]=!1;break;case-3:t[s]=null;break;case-5:t[s]=void 0;break;case-4:t[s]="";break;default:t[s]=o[i]}}return n.verbose&&console.log("Parsed "+this.JSON.stringify(t)),t}throw new TypeError("Bad token "+r+" isn't a type")}()}}})}("undefined"!=typeof define&&define.amd?define:function(e,r){var t=r();if(void 0!==n)for(var i in t)n[i]=t[i];else window.jsonpack=t})},{}]},{},[1]);